# SSQuant æ¡†æ¶æ›´æ–°æ—¥å¿— - 2026å¹´1æœˆ6æ—¥

## æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°æ˜¯ SSQuant æ¡†æ¶çš„ä¸€æ¬¡**é‡å¤§å‡çº§**ï¼Œæ¶µç›–å›æµ‹å¼•æ“ä¼˜åŒ–å’ŒæŠ¥å‘Šç³»ç»Ÿé‡æ„ä¸¤å¤§æ ¸å¿ƒæ¨¡å—ã€‚

### ğŸš€ æ ¸å¿ƒæ›´æ–°äº®ç‚¹

| æ›´æ–°é¡¹ | æ”¹è¿›å†…å®¹ | æ•ˆæœ |
|-------|---------|------|
| **æ•°æ®å¯¹é½å‡½æ•°** | å®Œå–„ `align_data` å¤šæ•°æ®æºæ—¶é—´å¯¹é½æœºåˆ¶ | å¤šå‘¨æœŸ/å¤šå“ç§ç­–ç•¥æ•°æ®åŒæ­¥ |
| **æ•°æ®çª—å£æ§åˆ¶** | æ–°å¢ `lookback_bars` æ»‘åŠ¨çª—å£å‚æ•° | å†…å­˜å ç”¨é™ä½ 90%+ |
| **å›æµ‹é€Ÿåº¦æå‡** | ä¿®å¤æ•°æ®ç´¯ç§¯å¯¼è‡´çš„æ€§èƒ½ä¸‹é™é—®é¢˜ | é€Ÿåº¦ç¨³å®šï¼Œä¸å†é€æ­¥ä¸‹é™ |
| **æŠ¥å‘Šç”Ÿæˆé€Ÿåº¦** | Plotly æ›¿æ¢ matplotlib | ç”Ÿæˆé€Ÿåº¦æå‡ **5-10 å€** |
| **æŠ¥å‘Šç³»ç»Ÿé‡åˆ¶** | å…¨æ–°äº¤äº’å¼ HTML æŠ¥å‘Š | æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€å¤šå›¾å¯¹æ¯” |

### ğŸ“Š æ€§èƒ½å¯¹æ¯”

#### å›æµ‹é€Ÿåº¦

| åœºæ™¯ | ä¿®æ”¹å‰ | ä¿®æ”¹å |
|-----|-------|-------|
| å•å“ç§å›æµ‹ | ç¨³å®š | ç¨³å®š |
| å¤šå‘¨æœŸå›æµ‹ï¼ˆåˆæœŸï¼‰ | 16ä¸‡æ¡/åˆ†é’Ÿ | 16ä¸‡æ¡/åˆ†é’Ÿ |
| å¤šå‘¨æœŸå›æµ‹ï¼ˆåæœŸï¼‰ | **é™è‡³ 5ä¸‡æ¡/åˆ†é’Ÿ** | **ç¨³å®š 16ä¸‡æ¡/åˆ†é’Ÿ** |

#### æŠ¥å‘Šç”Ÿæˆé€Ÿåº¦

| æ•°æ®é‡ | matplotlib | Plotly HTML |
|-------|------------|-------------|
| 1ä¸‡æ¡ | ~5ç§’ | ~0.5ç§’ |
| 10ä¸‡æ¡ | ~30ç§’ | ~2ç§’ |
| 100ä¸‡æ¡ | ~5åˆ†é’Ÿ | ~15ç§’ |

### ğŸ”§ ä¸»è¦ä¿®æ”¹æ¨¡å—

1. **æ•°æ®å¯¹é½** (`align_data`)
   - æ”¯æŒå¤šå‘¨æœŸæ•°æ®æ—¶é—´ç´¢å¼•å¯¹é½
   - è‡ªåŠ¨å¡«å……ç¼ºå¤±å€¼ï¼ˆ`ffill` å‘å‰å¡«å……ï¼‰
   - ä¿®å¤ `align_data=False` æ—¶å›æµ‹é•¿åº¦è®¡ç®—é—®é¢˜

2. **æ•°æ®çª—å£** (`lookback_bars`)
   - é™åˆ¶æ¯æ¬¡ `get_klines()` è¿”å›çš„æ•°æ®é‡
   - é»˜è®¤ 500 æ¡ï¼Œå¯æ ¹æ®ç­–ç•¥éœ€æ±‚è°ƒæ•´
   - å›æµ‹å’Œå®ç›˜ç»Ÿä¸€æ”¯æŒ

3. **æŠ¥å‘Šç³»ç»Ÿé‡åˆ¶**
   - ä½¿ç”¨ Plotly ç”Ÿæˆäº¤äº’å¼å›¾è¡¨
   - å• HTML æ–‡ä»¶è¾“å‡ºï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–
   - æ”¯æŒå¤šæ•°æ®æºå¯¹æ¯”ã€Kçº¿å›¾ã€TICKå›¾
   - äº¤æ˜“è®°å½•åˆ†é¡µ + ç­›é€‰åŠŸèƒ½

---

## ç›®å½•

- [ä¸€ã€å›æµ‹æ€§èƒ½ä¼˜åŒ–](#ä¸€å›æµ‹æ€§èƒ½ä¼˜åŒ–)
  - [1.1 å‘ç°çš„é—®é¢˜](#11-å‘ç°çš„é—®é¢˜)
  - [1.2 é—®é¢˜åŸå› ](#12-é—®é¢˜åŸå› )
  - [1.3 è§£å†³æ–¹æ¡ˆ - lookback_bars å‚æ•°](#13-è§£å†³æ–¹æ¡ˆ---lookback_bars-å‚æ•°)
- [äºŒã€æŠ¥å‘Šç³»ç»Ÿé‡æ„](#äºŒæŠ¥å‘Šç³»ç»Ÿé‡æ„)
  - [2.1 é—®é¢˜åˆ†æ](#21-é—®é¢˜åˆ†æ)
  - [2.2 è§£å†³æ–¹æ¡ˆ - Plotly + HTML](#22-è§£å†³æ–¹æ¡ˆ---plotly--html)
  - [2.3 æ–°æŠ¥å‘ŠåŠŸèƒ½](#23-æ–°æŠ¥å‘ŠåŠŸèƒ½)
- [ä¸‰ã€ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•](#ä¸‰ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•)
  - [3.1 æ–°å¢æ–‡ä»¶](#31-æ–°å¢æ–‡ä»¶)
  - [3.2 é…ç½®æ–‡ä»¶](#32-é…ç½®æ–‡ä»¶)
  - [3.3 æ•°æ®æ¨¡å—](#33-æ•°æ®æ¨¡å—)
  - [3.4 å›æµ‹æ¨¡å—](#34-å›æµ‹æ¨¡å—)
  - [3.5 API æ¨¡å—](#35-api-æ¨¡å—)
  - [3.6 ç¤ºä¾‹ç­–ç•¥](#36-ç¤ºä¾‹ç­–ç•¥)
- [å››ã€ä½¿ç”¨æŒ‡å—](#å››ä½¿ç”¨æŒ‡å—)
  - [4.1 å›æµ‹é…ç½®ç¤ºä¾‹](#41-å›æµ‹é…ç½®ç¤ºä¾‹)
  - [4.2 ç­–ç•¥ä¸­åŠ¨æ€æŒ‡å®šçª—å£](#42-ç­–ç•¥ä¸­åŠ¨æ€æŒ‡å®šçª—å£)
  - [4.3 æ¨èçš„ lookback_bars å€¼](#43-æ¨èçš„-lookback_bars-å€¼)
- [äº”ã€HTML æŠ¥å‘ŠåŠŸèƒ½è¯¦è§£](#äº”html-æŠ¥å‘ŠåŠŸèƒ½è¯¦è§£)
  - [5.1 æŠ¥å‘Šç»“æ„](#51-æŠ¥å‘Šç»“æ„)
  - [5.2 äº¤äº’åŠŸèƒ½](#52-äº¤äº’åŠŸèƒ½)
  - [5.3 äº¤æ˜“è®°å½•ç­›é€‰](#53-äº¤æ˜“è®°å½•ç­›é€‰)
- [å…­ã€æ³¨æ„äº‹é¡¹](#å…­æ³¨æ„äº‹é¡¹)
- [ä¸ƒã€æµ‹è¯•éªŒè¯](#ä¸ƒæµ‹è¯•éªŒè¯)
- [å…«ã€åˆ é™¤/åºŸå¼ƒçš„ä»£ç ](#å…«åˆ é™¤åºŸå¼ƒçš„ä»£ç )

---

## ä¸€ã€å›æµ‹æ€§èƒ½ä¼˜åŒ–

### 1.1 å‘ç°çš„é—®é¢˜

åœ¨è¿è¡Œè·¨å‘¨æœŸç­–ç•¥ï¼ˆå¦‚ `B_è·¨å‘¨æœŸè¿‡æ»¤ç­–ç•¥.py`ï¼‰æ—¶ï¼Œå›æµ‹é€Ÿåº¦ä¼š**é€æ­¥ä¸‹é™**ï¼š
- åˆå§‹é€Ÿåº¦ï¼šçº¦ 16ä¸‡ Kçº¿/åˆ†é’Ÿ
- éšç€å›æµ‹è¿›è¡Œï¼Œé€Ÿåº¦é€æ¸é™ä½

### 1.2 é—®é¢˜åŸå› 

æ¯æ¬¡è°ƒç”¨ `api.get_klines()` æ—¶ï¼Œè¿”å›çš„æ•°æ®é‡éšå›æµ‹è¿›åº¦**çº¿æ€§ç´¯ç§¯**ï¼š

| å›æµ‹è¿›åº¦ | è¿”å›æ•°æ®é‡ |
|---------|-----------|
| ç¬¬ 1,000 æ¡ | 1,000 æ¡ |
| ç¬¬ 50,000 æ¡ | 50,000 æ¡ |
| ç¬¬ 100,000 æ¡ | 100,000 æ¡ |

è¿™å¯¼è‡´ï¼š
- å†…å­˜å ç”¨ä¸æ–­å¢åŠ 
- DataFrame æ“ä½œï¼ˆåˆ‡ç‰‡ã€å‡çº¿è®¡ç®—ç­‰ï¼‰è¶Šæ¥è¶Šæ…¢
- æ•´ä½“å›æµ‹é€Ÿåº¦é€æ­¥ä¸‹é™

### 1.3 è§£å†³æ–¹æ¡ˆ - `lookback_bars` å‚æ•°

æ–°å¢ Kçº¿å›æº¯çª—å£å‚æ•°ï¼Œé™åˆ¶æ¯æ¬¡ `get_klines()` è¿”å›çš„æœ€å¤§æ•°æ®é‡ã€‚

**å‚æ•°è¯´æ˜ï¼š**
- `lookback_bars=500`ï¼šæ¯æ¬¡æœ€å¤šè¿”å›æœ€è¿‘ 500 æ¡ Kçº¿
- `lookback_bars=0`ï¼šä¸é™åˆ¶ï¼Œè¿”å›å…¨éƒ¨å†å²æ•°æ®ï¼ˆä¸æ¨èï¼‰

**æ•ˆæœï¼š**
- æ•°æ®é‡æ’å®šï¼Œå›æµ‹é€Ÿåº¦ç¨³å®š
- å†…å­˜å ç”¨å¯æ§

---

## äºŒã€æŠ¥å‘Šç³»ç»Ÿé‡æ„

### 2.1 é—®é¢˜åˆ†æ

åŸæœ‰ matplotlib æŠ¥å‘Šç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

| é—®é¢˜ | åŸå›  |
|-----|------|
| ç”Ÿæˆé€Ÿåº¦æ…¢ | matplotlib é€æ¡ç»˜åˆ¶Kçº¿ï¼Œæ•ˆç‡ä½ |
| æ–‡ä»¶ä½“ç§¯å¤§ | PNG å›¾ç‰‡åŒ…å«å¤§é‡åƒç´ æ•°æ® |
| æ— æ³•äº¤äº’ | é™æ€å›¾ç‰‡æ— æ³•ç¼©æ”¾ã€æ‹–æ‹½ã€æŸ¥çœ‹è¯¦æƒ… |
| å¤šæ•°æ®æºæ”¯æŒå·® | å¤šä¸ªå›¾è¡¨éš¾ä»¥å¯¹æ¯”æŸ¥çœ‹ |

### 2.2 è§£å†³æ–¹æ¡ˆ - Plotly + HTML

ä½¿ç”¨ Plotly ç”Ÿæˆäº¤äº’å¼ HTML æŠ¥å‘Šï¼š

| ç‰¹æ€§ | è¯´æ˜ |
|-----|------|
| äº¤äº’å¼å›¾è¡¨ | æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€æ‚¬åœæŸ¥çœ‹è¯¦æƒ… |
| ç”Ÿæˆé€Ÿåº¦å¿« | JavaScript æ¸²æŸ“ï¼Œæ¯” matplotlib å¿« 5-10 å€ |
| å•æ–‡ä»¶è¾“å‡º | æ‰€æœ‰å›¾è¡¨å’Œæ•°æ®æ•´åˆåˆ°ä¸€ä¸ª HTML æ–‡ä»¶ |
| å¤šæ•°æ®æºå¯¹æ¯” | åŒä¸€å›¾è¡¨å±•ç¤ºå¤šä¸ªæ•°æ®æºçš„æ›²çº¿ |

### 2.3 æ–°æŠ¥å‘ŠåŠŸèƒ½

#### 2.3.1 åˆ©æ¶¦æ›²çº¿å¯¹æ¯”

- æ¯ä¸ªæ•°æ®æºç‹¬ç«‹çš„åˆ©æ¶¦æ›²çº¿ï¼ˆ`æƒç›Š - åˆå§‹èµ„é‡‘`ï¼‰
- ç»¼åˆåˆ©æ¶¦æ›²çº¿ï¼ˆæ‰€æœ‰æ•°æ®æºåˆ©æ¶¦æ±‚å’Œï¼‰
- æ”¯æŒå¤šæ•°æ®æºåŒå›¾å¯¹æ¯”

#### 2.3.2 å›æ’¤æ›²çº¿å¯¹æ¯”

- æ¯ä¸ªæ•°æ®æºçš„å›æ’¤ç™¾åˆ†æ¯”æ›²çº¿
- ç»¼åˆå›æ’¤æ›²çº¿
- å¯è§†åŒ–æœ€å¤§å›æ’¤ä½ç½®

#### 2.3.3 æ•°æ®æºå¯¹æ¯”è¡¨

| æŒ‡æ ‡ | è¯´æ˜ |
|-----|------|
| åˆå§‹/æœŸæœ«èµ„é‡‘ | å„æ•°æ®æºèµ„é‡‘å˜åŒ– |
| æ€»äº¤æ˜“æ¬¡æ•° | å¼€å¹³ä»“æ€»æ•° |
| èƒœç‡ | ç›ˆåˆ©äº¤æ˜“å æ¯” |
| æœ€å¤§å›æ’¤ | å³°å€¼åˆ°è°·åº•çš„æœ€å¤§è·Œå¹… |
| å¤æ™®æ¯”ç‡ | é£é™©è°ƒæ•´åæ”¶ç›Š |
| **ç»¼åˆç»©æ•ˆ** | æ‰€æœ‰æ•°æ®æºæ±‡æ€»ç»Ÿè®¡ |

#### 2.3.4 Kçº¿å›¾/TICKå›¾

- Kçº¿æ•°æ®ï¼šæ˜¾ç¤ºèœ¡çƒ›å›¾ + ä¹°å–ä¿¡å·æ ‡è®°
- TICKæ•°æ®ï¼šæ˜¾ç¤ºä»·æ ¼çº¿å›¾ + ä¹°å–ä¿¡å·æ ‡è®°
- æ”¯æŒæ¯«ç§’çº§æ—¶é—´ç²¾åº¦

#### 2.3.5 äº¤æ˜“è®°å½•è¡¨

- åˆ†é¡µæ˜¾ç¤ºï¼ˆæ¯é¡µ 50 æ¡ï¼‰
- ç­›é€‰åŠŸèƒ½ï¼šæ—¶é—´ã€ä»·æ ¼ã€æ–¹å‘ï¼ˆå¼€å¤š/å¼€ç©º/å¹³å¤š/å¹³ç©ºï¼‰ã€ç›ˆäº
- å®Œæ•´äº¤æ˜“æ˜ç»†ï¼šæ—¶é—´ã€ä»·æ ¼ã€æ•°é‡ã€æ–¹å‘ã€ç›ˆäº

---

## ä¸‰ã€ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### 3.1 æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|-----|------|
| `ssquant/backtest/html_report.py` | HTML æŠ¥å‘Šç”Ÿæˆå™¨ï¼ˆçº¦ 1900 è¡Œï¼‰ |

### 3.2 é…ç½®æ–‡ä»¶

#### `ssquant/config/trading_config.py`

**ä¿®æ”¹å†…å®¹ï¼š**
1. æ·»åŠ  `align_data` å’Œ `fill_method` é»˜è®¤é…ç½®
2. æ·»åŠ  `lookback_bars` é»˜è®¤é…ç½®ï¼ˆå›æµ‹é»˜è®¤ 500ï¼‰
3. å®Œå–„æ‰€æœ‰é…ç½®é¡¹çš„ä¸­æ–‡æ³¨é‡Š

```python
BACKTEST_DEFAULTS = {
    # -------- æ•°æ®å¯¹é½é…ç½® --------
    'align_data': False,            # æ˜¯å¦å¯¹é½å¤šæ•°æ®æºæ—¶é—´ç´¢å¼•
    'fill_method': 'ffill',         # ç¼ºå¤±å€¼å¡«å……æ–¹æ³•
    
    # -------- æ•°æ®çª—å£é…ç½® --------
    'lookback_bars': 500,           # Kçº¿å›æº¯çª—å£å¤§å°
    ...
}
```

#### `requirements.txt`

```diff
- matplotlib>=3.5.0
- scipy>=1.7.0
- Pillow>=8.0.0
+ plotly>=5.18.0
```

### 3.3 æ•°æ®æ¨¡å—

#### `ssquant/data/data_source.py`

- `get_klines()` æ”¯æŒ `lookback_bars` å‚æ•°
- `get_ticks()` æ”¯æŒ `lookback_bars` å‚æ•°

#### `ssquant/data/api_data_fetcher.py`

**ä¿®å¤ TICK æ•°æ®æ¯«ç§’ä¸¢å¤±é—®é¢˜ï¼š**

```python
# ä¿®æ”¹å‰ï¼šæ¯«ç§’è¢«æˆªæ–­
data['datetime'] = data['datetime'].dt.strftime('%Y-%m-%d %H:%M:%S')

# ä¿®æ”¹åï¼šTICKæ•°æ®ä¿ç•™æ¯«ç§’
if is_tick_data:
    # æ ¼å¼ï¼š2026-01-06 10:34:00.500
    data['datetime'] = data['datetime'].apply(
        lambda dt: dt.strftime('%Y-%m-%d %H:%M:%S.') + f'{dt.microsecond // 1000:03d}'
    )
```

### 3.4 å›æµ‹æ¨¡å—

#### `ssquant/backtest/backtest_core.py`

**ä¿®æ”¹å†…å®¹ï¼š**
1. é›†æˆ `HTMLReportGenerator` æ›¿ä»£æ—§çš„ matplotlib å¯è§†åŒ–
2. ä¿®å¤ `align_data=False` æ—¶å›æµ‹é•¿åº¦è®¡ç®—é—®é¢˜

```python
# ä¿®æ”¹å‰ï¼šæ€»æ˜¯ä½¿ç”¨æœ€å°é•¿åº¦ï¼ˆå¯¼è‡´æ•°æ®æˆªæ–­ï¼‰
total_length = min(data_lengths)

# ä¿®æ”¹åï¼šæ ¹æ® align_data é€‰æ‹©
if align_data:
    total_length = min(data_lengths)  # å¯¹é½æ¨¡å¼ç”¨æœ€å°
else:
    total_length = max(data_lengths)  # ç‹¬ç«‹æ¨¡å¼ç”¨æœ€å¤§
```

#### `ssquant/backtest/backtest_data.py`

- ä¼ é€’ `lookback_bars` å‚æ•°åˆ°æ•°æ®æº

#### `ssquant/backtest/unified_runner.py`

- ä»ç­–ç•¥é…ç½®è¯»å– `lookback_bars` å¹¶ä¼ é€’åˆ°å›æµ‹å¼•æ“

#### `ssquant/backtest/live_trading_adapter.py`

- `LiveDataSource` ä½¿ç”¨ `lookback_bars` é…ç½® deque å¤§å°
- Kçº¿å’Œ TICK æ•°æ®ç¼“å­˜ç»Ÿä¸€ä½¿ç”¨ `lookback_bars`

### 3.5 API æ¨¡å—

#### `ssquant/api/strategy_api.py`

- `get_klines()` å’Œ `get_ticks()` æ”¯æŒ `window` å‚æ•°

### 3.6 ç¤ºä¾‹ç­–ç•¥

ä»¥ä¸‹ç¤ºä¾‹ç­–ç•¥å‡æ·»åŠ äº† `lookback_bars` é…ç½®ï¼š

| æ–‡ä»¶å | ç­–ç•¥ç±»å‹ | lookback_bars |
|-------|---------|---------------|
| `B_è·¨å‘¨æœŸè¿‡æ»¤ç­–ç•¥.py` | è·¨å‘¨æœŸ | 500 |
| `B_å¤šå“ç§å¤šå‘¨æœŸäº¤æ˜“ç­–ç•¥.py` | å¤šå“ç§å¤šå‘¨æœŸ | 500 |
| `B_è·¨å“ç§å¥—åˆ©ç­–ç•¥.py` | è·¨å“ç§å¥—åˆ© | 500 |
| `B_å¼ºå¼±æˆªé¢è½®åŠ¨ç­–ç•¥.py` | æˆªé¢è½®åŠ¨ | 500 |
| `B_è·¨æœŸå¥—åˆ©ç­–ç•¥.py` | è·¨æœŸå¥—åˆ© | 500 |
| `B_åŒå‡çº¿ç­–ç•¥.py` | å•å“ç§ | 500 |
| `B_ç½‘æ ¼äº¤æ˜“ç­–ç•¥.py` | å•å“ç§ | 500 |
| `B_æµ·é¾Ÿäº¤æ˜“ç­–ç•¥.py` | å•å“ç§ | 500 |
| `B_åå¤§ç»å…¸ç­–ç•¥ä¹‹Aberration.py` | å•å“ç§ | 500 |
| `B_æ—¥å†…äº¤æ˜“ç­–ç•¥.py` | æ—¥å†… | 500 |
| `B_æœºå™¨å­¦ä¹ ç­–ç•¥_éšæœºæ£®æ—.py` | æœºå™¨å­¦ä¹  | 1000 |
| `C_çº¯Tické«˜é¢‘äº¤æ˜“ç­–ç•¥.py` | TICKç­–ç•¥ | 1000 |
| `C_çº¯Tické™ä»·å•äº¤æ˜“ç­–ç•¥.py` | TICKç­–ç•¥ | 1000 |

---

## å››ã€ä½¿ç”¨æŒ‡å—

### 4.1 å›æµ‹é…ç½®ç¤ºä¾‹

```python
config = get_config(RUN_MODE,
    start_date='2025-01-01',
    end_date='2025-12-31',
    initial_capital=100000,
    
    # æ•°æ®å¯¹é½ï¼ˆå¤šå‘¨æœŸç­–ç•¥å»ºè®®å¼€å¯ï¼‰
    align_data=True,
    fill_method='ffill',
    
    # Kçº¿å›æº¯çª—å£
    lookback_bars=500,
    
    data_sources=[
        {'symbol': 'rb888', 'kline_period': '1m'},
        {'symbol': 'rb888', 'kline_period': '15m'},
    ]
)
```

### 4.2 ç­–ç•¥ä¸­åŠ¨æ€æŒ‡å®šçª—å£

```python
def my_strategy(api: StrategyAPI):
    # ä½¿ç”¨é»˜è®¤çª—å£
    klines = api.get_klines(0)
    
    # æŒ‡å®šçª—å£å¤§å°
    klines_100 = api.get_klines(0, window=100)
    klines_all = api.get_klines(0, window=0)  # ä¸é™åˆ¶
```

### 4.3 æ¨èçš„ `lookback_bars` å€¼

| ç­–ç•¥ç±»å‹ | æ¨èå€¼ | è¯´æ˜ |
|---------|-------|------|
| çŸ­æœŸç­–ç•¥ | 200-500 | MA(20) ç­‰çŸ­æœŸæŒ‡æ ‡ |
| ä¸­æœŸç­–ç•¥ | 500-1000 | MA(60) ç­‰ä¸­æœŸæŒ‡æ ‡ |
| é•¿æœŸç­–ç•¥ | 1000-2000 | MA(200) ç­‰é•¿æœŸæŒ‡æ ‡ |
| æœºå™¨å­¦ä¹  | 1000+ | éœ€è¦æ›´å¤šè®­ç»ƒæ•°æ® |
| TICKç­–ç•¥ | 1000+ | TICKæ•°æ®é‡å¤§ |

---

## äº”ã€HTML æŠ¥å‘ŠåŠŸèƒ½è¯¦è§£

### 5.1 æŠ¥å‘Šç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å›æµ‹æŠ¥å‘Šæ ‡é¢˜               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®æºå¯¹æ¯”è¡¨ï¼ˆå«ç»¼åˆç»©æ•ˆï¼‰          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ©æ¶¦æ›²çº¿å¯¹æ¯”ï¼ˆå¯äº¤äº’ï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å›æ’¤æ›²çº¿å¯¹æ¯”ï¼ˆå¯äº¤äº’ï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ•°æ®æº1] [æ•°æ®æº2] ...  â† æ ‡ç­¾é¡µ   â”‚
â”‚  â”œâ”€ è¯¦ç»†ç»©æ•ˆæŒ‡æ ‡                    â”‚
â”‚  â”œâ”€ Kçº¿å›¾/TICKå›¾ï¼ˆå«ä¹°å–ä¿¡å·ï¼‰      â”‚
â”‚  â””â”€ äº¤æ˜“è®°å½•ï¼ˆåˆ†é¡µ+ç­›é€‰ï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¡µè„šï¼šæ¾é¼ Quant-ssquantæ¡†æ¶        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 äº¤äº’åŠŸèƒ½

| åŠŸèƒ½ | æ“ä½œæ–¹å¼ |
|-----|---------|
| ç¼©æ”¾ | é¼ æ ‡æ»šè½® / å·¥å…·æ æŒ‰é’® |
| æ‹–æ‹½å¹³ç§» | é¼ æ ‡å·¦é”®æ‹–åŠ¨ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰ |
| æŸ¥çœ‹è¯¦æƒ… | é¼ æ ‡æ‚¬åœæ˜¾ç¤º tooltip |
| é‡ç½®è§†å›¾ | åŒå‡» / å·¥å…·æ  Home æŒ‰é’® |
| ä¸‹è½½å›¾ç‰‡ | å·¥å…·æ ç›¸æœºå›¾æ ‡ |

### 5.3 äº¤æ˜“è®°å½•ç­›é€‰

æ”¯æŒä»¥ä¸‹ç­›é€‰æ¡ä»¶ï¼š
- **æ—¶é—´**ï¼šè¾“å…¥æ—¥æœŸæˆ–æ—¶é—´å…³é”®è¯
- **ä»·æ ¼**ï¼šè¾“å…¥ä»·æ ¼æ•°å€¼
- **æ–¹å‘**ï¼šå¼€å¤šã€å¼€ç©ºã€å¹³å¤šã€å¹³ç©º
- **ç›ˆäº**ï¼šç›ˆåˆ©ã€äºæŸ

---

## å…­ã€æ³¨æ„äº‹é¡¹

### 6.1 `lookback_bars` è®¾ç½®

- åº”å¤§äºç­–ç•¥æ‰€éœ€çš„æœ€å¤§å›æº¯å‘¨æœŸ
- å¦‚æœä½¿ç”¨ MA(200)ï¼Œå»ºè®®è®¾ç½® 250 ä»¥ä¸Š

### 6.2 æ•°æ®å¯¹é½

- `align_data=True`ï¼šå¤šå‘¨æœŸç­–ç•¥ï¼Œæ•°æ®æŒ‰æ—¶é—´å¯¹é½
- `align_data=False`ï¼šå¤šä¸ªç‹¬ç«‹ç­–ç•¥ï¼Œå„è‡ªè¿è¡Œå®Œæ•´å‘¨æœŸ

### 6.3 TICK æ•°æ®æ¯«ç§’ç²¾åº¦

- æ–°é‡‡é›†çš„ TICK æ•°æ®ä¼šä¿ç•™æ¯«ç§’ï¼ˆå¦‚ `10:34:00.500`ï¼‰
- æ—§æ•°æ®åº“ä¸­çš„æ•°æ®éœ€è¦é‡æ–°é‡‡é›†æ‰èƒ½è·å¾—æ¯«ç§’ç²¾åº¦

### 6.4 å®ç›˜æ¨¡å¼

- `lookback_bars=0` æ—¶é»˜è®¤ä½¿ç”¨ 1000 æ¡çš„ deque
- è®¾ç½®å…·ä½“å€¼æ—¶ä¼šä½¿ç”¨è¯¥å€¼ä½œä¸º deque å¤§å°

---

## ä¸ƒã€æµ‹è¯•éªŒè¯

### 7.1 æ€§èƒ½æµ‹è¯•

| æµ‹è¯•é¡¹ | ç»“æœ |
|-------|------|
| å›æµ‹é€Ÿåº¦ | âœ… ç¨³å®šï¼Œä¸å†é€æ­¥ä¸‹é™ |
| `lookback_bars=500` | âœ… æ­£ç¡®ç”Ÿæ•ˆ |
| æ•°æ®å¯¹é½ | âœ… åŠŸèƒ½æ­£å¸¸ |

### 7.2 æŠ¥å‘Šæµ‹è¯•

| æµ‹è¯•é¡¹ | ç»“æœ |
|-------|------|
| å•æ•°æ®æºæŠ¥å‘Š | âœ… æ­£å¸¸ç”Ÿæˆ |
| å¤šæ•°æ®æºæŠ¥å‘Š | âœ… æ›²çº¿å¯¹æ¯”æ­£å¸¸ |
| TICKæ•°æ®æŠ¥å‘Š | âœ… ä»·æ ¼çº¿å›¾+ä¿¡å·æ­£å¸¸ |
| äº¤æ˜“è®°å½•åˆ†é¡µ | âœ… ç­›é€‰åŠŸèƒ½æ­£å¸¸ |
| å›¾è¡¨äº¤äº’ | âœ… ç¼©æ”¾ã€æ‹–æ‹½æ­£å¸¸ |

---

## å…«ã€åˆ é™¤/åºŸå¼ƒçš„ä»£ç 

ä»¥ä¸‹æ—§ä»£ç å·²ç§»é™¤æˆ–ä¸å†ä½¿ç”¨ï¼š

| æ–‡ä»¶/ä»£ç  | çŠ¶æ€ |
|----------|------|
| `backtest_visualization.py` ä¸­çš„ matplotlib ç»‘å®š | å·²ç§»é™¤å¯¼å…¥ |
| `backtest_report.py` ä¸­çš„å›¾è¡¨ç”Ÿæˆ | ä¸å†è°ƒç”¨ |
| `requirements.txt` ä¸­çš„ matplotlib ä¾èµ– | å·²æ³¨é‡Š |

---

*æ–‡æ¡£æ›´æ–°æ—¶é—´ï¼š2026-01-06*  
*ç”± æ¾é¼ Quant-ssquantæ¡†æ¶ ç”Ÿæˆ*  
*https://gitee.com/ssquant/ssquant*

